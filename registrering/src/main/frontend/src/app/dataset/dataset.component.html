<alert type="success" *ngIf="saved">
    Sist lagret {{lastSaved}}
</alert>
<alert type="info" *ngIf="!saved">
    Endringer lagres automatisk
</alert>

<div class="panel fdk-panel" *ngIf="dataset" id="dataset">
    <div class="fdk-panel-big-heading" *ngIf="dataset.title">
        <input class="fdk-register-h1" id="tittel-datasett" (keyup)="valuechange($event)" type="text"
               placeholder="Tittel" [(ngModel)]="dataset.title[language]"/>
    </div>
    <div class="fdk-panel-big-body" *ngIf="dataset.description">
        <h2 id="datasett-utgiver-navn">{{dataset.publisher.name}}</h2>
        <textarea autofocus class="fdk-register-h3" rows="5" id="beskrivelse-datasett"
                  (ngModelChange)="valuechange(this)" placeholder="Beskrivelse"
                  [(ngModel)]='dataset.description[language]'></textarea>
    </div>
</div>
<form [formGroup]="datasetForm" class="form-group" *ngIf="dataset">
    <div class="panel fdk-panel">
        <div class="fdk-panel-heading">Opplysninger</div>
        <information [dataset]="dataset" (onSave)="onSave($event)"></information>
    </div>
    <div class="panel fdk-panel">
        <div class="fdk-panel-heading">
            Kvalitet
        </div>
        <quality [dataset]="dataset"
                 (onSave)="onSave($event)">
        </quality>
    </div>

  <div class="panel fdk-panel">
    <div class="fdk-panel-heading">Distribusjoner</div>
    <div class="fdk-panel-body">
      <distributions
        [title]="Distribusjoner"
        [datasetForm]="datasetForm"
        [distributionsFormArray]="datasetForm.controls.distributions"
        [distributions]="dataset.distributions"></distributions>
    </div>
  </div>

  <div class="panel fdk-panel">
    <div class="fdk-panel-heading">Øvrige felter</div>
    <div class="fdk-panel-body dataset-languages">
          <div *ngIf="datasetForm.controls['checkboxArray']">
            <label for="languages" class="control-label">Datasettets språk:</label>
            <div id="languages" *ngFor="let control of datasetForm.controls['checkboxArray'].controls; let i=index" class="checkbox">
              <label><!-- 416 -->
                <input type="checkbox" id="checkbox-1" [formControl]="control" />
                {{availableLanguages[i].prefLabel.nb}}
              </label>
            </div>
          </div>
          <div class="row">
            <div class="col-md-3">
              <label for="issued" class="control-label">Opprettet dato:</label>
              <my-date-picker placeholder="Opprettet dato" id="issued" name="issued" [options]="myDatePickerOptions" locale="no"
                              formControlName="issued" ></my-date-picker>
              <label for="modified" class="control-label">Endret dato:</label>
              <my-date-picker placeholder="Endret dato" id="modified" name="modified" [options]="myDatePickerOptions" locale="no"
                              formControlName="modified"></my-date-picker>
            </div>
          </div>
<br /> <br />
            <div class="row">
              <div class="col-md-6">
                <temporals
                  title="Tidsperioder"
                  [datasetForm]="datasetForm"
                  [temporalsFormArray]="datasetForm.controls.temporals"
                  [temporals]="dataset.temporals">
                </temporals>
              </div>
            </div>
<br /><br />
            <div class="row">
              <div class="col-md-6">
                <distributions
                    [datasetForm]="datasetForm"
                    [distributionsFormArray]="datasetForm.controls.samples"
                    [distributions]="dataset.samples"
                    title="Eksempeldata"
                >
                </distributions>
              </div>
            </div>

        </div>
  </div>


    <div class="panel fdk-panel">
        <div class="fdk-panel-heading">
            Tilgangsnivå
        </div>
        <accessRights [dataset]="dataset"
                      (onSave)="onSave($event)">
        </accessRights>
    </div>
    <div class="panel fdk-panel">
        <div class="fdk-panel-heading">
            Geografisk avgrensning
        </div>
        <spatial [dataset]="dataset"
                 (onSave)="onSave($event)">
        </spatial>
    </div>

    <div class="panel fdk-panel" *ngIf="dataset.contactPoints">
        <div class="fdk-panel-heading">Kontaktinformasjon</div>
        <contact
            [contactsArray]="datasetForm.controls.contactPoints"
            [contact]="dataset.contactPoints[0]">
        </contact>
    </div>


</form>
<button type="button" class="btn btn-default fdk-label fdk-label-default" (click)="back()" id="button_back_to_catalog">Tilbake</button>
<button type="button" class="btn btn-default fdk-label fdk-label-default" (click)="showConfirmDelete()" id="button_delete_catalog">Slett datasett
</button>
