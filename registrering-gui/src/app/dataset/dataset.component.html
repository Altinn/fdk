<alert type="success" *ngIf="saved">
  Sist lagret {{lastSaved}}
</alert>
<alert type="info" *ngIf="!saved">
  Endringer lagres automatisk
</alert>

<div class="panel fdk-panel" *ngIf="dataset" id="dataset">
  <div class="fdk-panel-big-heading" *ngIf="dataset.title" >
    <input  class="fdk-register-h1" id="tittel-datasett" (keyup)="valuechange($event)" type="text" placeholder="Tittel" [(ngModel)]="dataset.title[language]"/>
  </div>
  <div class="fdk-panel-big-body"  *ngIf="dataset.description">
    <h2 id="datasett-utgiver-navn">{{dataset.publisher.name}}</h2>
    <textarea autofocus class="fdk-register-h3" rows="5" id="beskrivelse-datasett" (ngModelChange)="valuechange(this)" placeholder="Beskrivelse" [(ngModel)]='dataset.description[language]'></textarea>
  </div>
</div>

<div class="panel fdk-panel" *ngIf="dataset">
  <div class="fdk-panel-heading">
    Opplysninger
  </div>
  <div class="fdk-panel-body">
    <div class="form-group">
        <label for="emneord-datasett" class="control-label">Emneord:</label>
        <rl-tag-input id="emneord-datasett" class="form-control" (ngModelChange)="valuechange()" [(ngModel)]="dataset.keywords[language]" placeholder="Emneord"></rl-tag-input>
    </div>

    <div class="form-group">
        <label for="begrep-datasett" class="control-label">Begrep:</label>
        <rl-tag-input id="begrep-datasett" class="form-control" (ngModelChange)="valuechange()" [(ngModel)]="dataset.subjects" placeholder="Begrep"></rl-tag-input>
    </div>

      <div class="form-group">
        <label for="tema-datasett" class="control-label">Tema:</label>
        <form [formGroup]="themesForm">
          <ng-select id="tema-datasett"
                (ngModelChange)="valuechange()"
        		[options]="themes"
        		[multiple]="true"
        		placeholder="Velg Tema"
                formControlName="themes">
        	</ng-select>
        </form>
      </div>

    </div>
</div>


  <!-- parent-form.component.html -->
  <form [formGroup]="datasetForm" class="form-group" *ngIf="dataset">

      <div class="panel fdk-panel">
          <div class="fdk-panel-heading">
              Kvalitet
          </div>

          <quality [datasetForm]="datasetForm"
                   [dataset]="dataset"
                   (onSave)="onSave($event)">
          </quality>

      </div>

        <div class="panel fdk-panel">
            <div class="fdk-panel-heading">
                Distribusjoner
            </div>
            <div class="fdk-panel-body">

                  <distributions
                      [datasetForm]="datasetForm"
                      [distributions]="dataset.distributions"
                      >
                  </distributions>
            </div>
        </div>

      <div class="panel fdk-panel" *ngIf="dataset && dataset.contactPoints">
          <div class="fdk-panel-heading">
              Kontaktinformasjon
          </div>
          <contact [contactsController]="datasetForm.controls.contactPoints"
                   [contact]="dataset.contactPoints[0]">
          </contact>
      </div>

  </form>

  <button type="button" class="btn btn-default fdk-label fdk-label-default" (click)="back()">Tilbake</button>
  <button type="button" class="btn btn-default fdk-label fdk-label-default" (click)="showConfirmDelete()">Slett
    datasett
  </button>
